!function(){let e=".stories-bar",t=".story",l=[],r=document.querySelector(".story-container.current-highlight");function n(){let r=document.querySelectorAll(".story-container"),n=r[0].querySelector(e).cloneNode(!0);r.forEach((r,o)=>{if(!1==l.includes(r)){r.querySelector(".story-wrap");let i=r.querySelector(".stories-bar-wrap");r.querySelectorAll(`${t}`).forEach((e,t)=>{i.appendChild(n.cloneNode(!0))}),r.querySelector(e)&&r.querySelector(e).remove(),l.push(r)}}),l.forEach((e,l)=>{(function e(l){let r=[{width:"0%"},{width:"100%"}],n=l.querySelectorAll(".stories-progress"),o=l.querySelectorAll(t),i=[],s=[],c=window.innerWidth,a=Math.ceil(.2*l.getBoundingClientRect().width),u=0,h,y;function d(e){let t=e.target.getBoundingClientRect();h=Date.now(),y=e.clientX-t.left,i[u].pause()}function p(){Date.now()-h<200&&(y<a?u>0&&(i[u].cancel(),i[u-1].play(),o[u].style.zIndex=0,o[u].style.opacity=0,o[u-1].style.zIndex=2,o[u-1].style.opacity=1,u-=1):u!=i.length-1&&(i[u].finish(),i[u+1].play(),o[u].style.zIndex=0,o[u].style.opacity=0,o[u+1].style.zIndex=2,o[u+1].style.opacity=1,u+=1)),i[u].play()}o.forEach(e=>{e.getAttribute("data-duration")?s.push(parseInt(e.getAttribute("data-duration"))):s.push(3e3)}),n.forEach((e,t)=>{i.push(e.animate(r,{duration:s[t],fill:"forwards"})),t!=n.length-1&&(i[t].onfinish=function(){i[t+1].play(),o[t+1].style.zIndex=2,o[t+1].style.opacity=1,u=t+1})}),new IntersectionObserver(function(e,t){e.forEach(e=>{e.isIntersecting?(i.map((e,t)=>{t>0?(i[t].cancel(),i[t].pause()):(i[t].play(),o[0].style.zIndex=2,o[0].style.opacity=1,u=0)}),c>1024?(l.addEventListener("mousedown",e=>{d(e)}),l.addEventListener("mouseup",p)):(l.addEventListener("touchstart",e=>{d(e.touches[0])}),l.addEventListener("touchend",p))):(i.map((e,t)=>{i[t].cancel(),i[t].pause(),t>0?(o[t].style.zIndex=0,o[t].style.opacity=0):(o[t].style.zIndex=2,o[t].style.opacity=1),u=0}),c>1024?l.removeEventListener("mouseup",p):l.removeEventListener("touchend",p))})},{root:null,threshold:.8}).observe(l)})(e)})}let o=[],i=document.querySelector(".highlight-loader").querySelectorAll(".highlight-list-item"),s=document.querySelector(".highlight-loader");o.push(r),window.fsAttributes=window.fsAttributes||[],window.fsAttributes.push(["cmsload",e=>{let[t]=e,l=document.querySelector(".highlight-scroll-container");(i=document.querySelector(".highlight-loader").querySelectorAll(".highlight-list-item")).forEach(e=>{o.push(e),l.append(e)}),function e(t){t.addEventListener("scroll",function(){(progress=t.scrollTop/(t.scrollHeight-window.innerHeight)*100)>98&&!$("#highlight-next")[0].getAttribute("style")&&$("#highlight-next")[0].click()})}(l),n(),t.on("renderitems",e=>{e.map(e=>{o.includes(e.element)||(o.push(e.element),l.append(e.element))}),s.remove(),n()})},])}();
